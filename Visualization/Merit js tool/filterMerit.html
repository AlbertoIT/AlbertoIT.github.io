<!DOCTYPE html>
<html>
<head>
<script src="jquery-2.1.0.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <pre id="sent"></pre>
  <div id="table"></div>
<pre id="received"></pre>

  <script>
// noprotect


/*var sentMerit=$(json).filter(function (i,n){return n.from=='Piggy'});
document.getElementById("sent").innerHTML = JSON.stringify(sentMerit.toArray(), undefined, 2);
*/ 

var json = (function() {
        var json = null;
        json = $.getJSON("https://albertoit.github.io/Visualization/Merit%20js%20tool/content.json", function(json) {
        console.log(json); // access the response object
        console.log(json.data); // access the array
        console.log(json.data[0]); // access the first object of the array
        console.log(json.data[0].number); // access the first object proprty of the array
    });
        return json;
    })();

var receivedMerit=$(json).filter(function (i,n){return n.to=='Piggy'});

//document.getElementById("received").innerHTML = JSON.stringify(receivedMerit.toArray(), undefined, 2);

var txt="";
var total=0;
txt += "<table border='1'>"
        txt +="<tr><td colspan='3'>Received</td></tr>"
        txt +="<tr><td>From</td><td>To</td><td>Merits</td></tr>"
        for (x in receivedMerit.toArray()) {
            total+=receivedMerit[x].merit;
            txt += "<tr><td>" + receivedMerit[x].from + "</td><td>" + receivedMerit[x].to + "</td><td>" + receivedMerit[x].merit + "</td></tr>";
        }
        txt +="<tr><td colspan='3'>" + total + "</td></tr>"
        txt += "</table>"        
        document.getElementById("table").innerHTML = txt;

 
</script>
</head>
<body>

</body>
</html>

