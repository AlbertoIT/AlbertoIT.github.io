<!DOCTYPE html>
<html>
<head>
<script src="jquery-2.1.0.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <pre id="sent"></pre>
  <div id="table"></div>
<pre id="received"></pre>

  <script>
function loadJSON(callback) {   
  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
  xobj.open('GET', '../content.json', true);
  xobj.onreadystatechange = function () {
    if (xobj.readyState == 4 && xobj.status == "200") {
      callback(JSON.parse(xobj.responseText));
    }
  };
  xobj.send(null);  
}
var result;
loadJSON(function(json) {
  result= json;
  console.log(json); // this will log out the json object
});
var receivedMerit=$(result).filter(function (i,n){return n.to=='Piggy'});

//document.getElementById("received").innerHTML = JSON.stringify(receivedMerit.toArray(), undefined, 2);

var txt="";
var total=0;
txt += "<table border='1'>"
        txt +="<tr><td colspan='3'>Received</td></tr>"
        txt +="<tr><td>From</td><td>To</td><td>Merits</td></tr>"
        for (x in receivedMerit.toArray()) {
            total+=receivedMerit[x].merit;
            txt += "<tr><td>" + receivedMerit[x].from + "</td><td>" + receivedMerit[x].to + "</td><td>" + receivedMerit[x].merit + "</td></tr>";
        }
        txt +="<tr><td colspan='3'>" + total + "</td></tr>"
        txt += "</table>"        
        document.getElementById("table").innerHTML = txt;

 
</script>
</head>
<body>

</body>
</html>

